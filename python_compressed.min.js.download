!function(t,n){"function"==typeof define&&define.amd?define(["./blockly_compressed.js"],n):"object"==typeof exports?module.exports=n(require("./blockly_compressed.js")):t.Blockly.Python=n(t.Blockly)}(this,function(y){"use strict";return y.Python=new y.Generator("Python"),y.Python.addReservedWords("False,None,True,and,as,assert,break,class,continue,def,del,elif,else,except,exec,finally,for,from,global,if,import,in,is,lambda,nonlocal,not,or,pass,print,raise,return,try,while,with,yield,NotImplemented,Ellipsis,__debug__,quit,exit,copyright,license,credits,ArithmeticError,AssertionError,AttributeError,BaseException,BlockingIOError,BrokenPipeError,BufferError,BytesWarning,ChildProcessError,ConnectionAbortedError,ConnectionError,ConnectionRefusedError,ConnectionResetError,DeprecationWarning,EOFError,Ellipsis,EnvironmentError,Exception,FileExistsError,FileNotFoundError,FloatingPointError,FutureWarning,GeneratorExit,IOError,ImportError,ImportWarning,IndentationError,IndexError,InterruptedError,IsADirectoryError,KeyError,KeyboardInterrupt,LookupError,MemoryError,ModuleNotFoundError,NameError,NotADirectoryError,NotImplemented,NotImplementedError,OSError,OverflowError,PendingDeprecationWarning,PermissionError,ProcessLookupError,RecursionError,ReferenceError,ResourceWarning,RuntimeError,RuntimeWarning,StandardError,StopAsyncIteration,StopIteration,SyntaxError,SyntaxWarning,SystemError,SystemExit,TabError,TimeoutError,TypeError,UnboundLocalError,UnicodeDecodeError,UnicodeEncodeError,UnicodeError,UnicodeTranslateError,UnicodeWarning,UserWarning,ValueError,Warning,ZeroDivisionError,_,__build_class__,__debug__,__doc__,__import__,__loader__,__name__,__package__,__spec__,abs,all,any,apply,ascii,basestring,bin,bool,buffer,bytearray,bytes,callable,chr,classmethod,cmp,coerce,compile,complex,copyright,credits,delattr,dict,dir,divmod,enumerate,eval,exec,execfile,exit,file,filter,float,format,frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,intern,isinstance,issubclass,iter,len,license,list,locals,long,map,max,memoryview,min,next,object,oct,open,ord,pow,print,property,quit,range,raw_input,reduce,reload,repr,reversed,round,set,setattr,slice,sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,vars,xrange,zip"),y.Python.ORDER_ATOMIC=0,y.Python.ORDER_COLLECTION=1,y.Python.ORDER_STRING_CONVERSION=1,y.Python.ORDER_MEMBER=2.1,y.Python.ORDER_FUNCTION_CALL=2.2,y.Python.ORDER_EXPONENTIATION=3,y.Python.ORDER_UNARY_SIGN=4,y.Python.ORDER_BITWISE_NOT=4,y.Python.ORDER_MULTIPLICATIVE=5,y.Python.ORDER_ADDITIVE=6,y.Python.ORDER_BITWISE_SHIFT=7,y.Python.ORDER_BITWISE_AND=8,y.Python.ORDER_BITWISE_XOR=9,y.Python.ORDER_BITWISE_OR=10,y.Python.ORDER_RELATIONAL=11,y.Python.ORDER_LOGICAL_NOT=12,y.Python.ORDER_LOGICAL_AND=13,y.Python.ORDER_LOGICAL_OR=14,y.Python.ORDER_CONDITIONAL=15,y.Python.ORDER_LAMBDA=16,y.Python.ORDER_NONE=99,y.Python.ORDER_OVERRIDES=[[y.Python.ORDER_FUNCTION_CALL,y.Python.ORDER_MEMBER],[y.Python.ORDER_FUNCTION_CALL,y.Python.ORDER_FUNCTION_CALL],[y.Python.ORDER_MEMBER,y.Python.ORDER_MEMBER],[y.Python.ORDER_MEMBER,y.Python.ORDER_FUNCTION_CALL],[y.Python.ORDER_LOGICAL_NOT,y.Python.ORDER_LOGICAL_NOT],[y.Python.ORDER_LOGICAL_AND,y.Python.ORDER_LOGICAL_AND],[y.Python.ORDER_LOGICAL_OR,y.Python.ORDER_LOGICAL_OR]],y.Python.init=function(t){y.Python.PASS=this.INDENT+"pass\n",y.Python.definitions_=Object.create(null),y.Python.functionNames_=Object.create(null),y.Python.variableDB_?y.Python.variableDB_.reset():y.Python.variableDB_=new y.Names(y.Python.RESERVED_WORDS_),y.Python.variableDB_.setVariableMap(t.getVariableMap());for(var n=[],o=y.Variables.allDeveloperVariables(t),e=0;e<o.length;e++)n.push(y.Python.variableDB_.getName(o[e],y.Names.DEVELOPER_VARIABLE_TYPE)+" = None");for(t=y.Variables.allUsedVarModels(t),e=0;e<t.length;e++)n.push(y.Python.variableDB_.getName(t[e].getId(),y.VARIABLE_CATEGORY_NAME)+" = None");y.Python.definitions_.variables=n.join("\n")},y.Python.finish=function(t){var n,o=[],e=[];for(n in y.Python.definitions_){var r=y.Python.definitions_[n];r.match(/^(from\s+\S+\s+)?import\s+\S+/)?o.push(r):e.push(r)}return delete y.Python.definitions_,delete y.Python.functionNames_,y.Python.variableDB_.reset(),(o.join("\n")+"\n\n"+e.join("\n\n")).replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n\n")+t},y.Python.scrubNakedValue=function(t){return t+"\n"},y.Python.quote_=function(t){var n="'";return-1!==(t=t.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n")).indexOf("'")&&(-1===t.indexOf('"')?n='"':t=t.replace(/'/g,"\\'")),n+t+n},y.Python.multiline_quote_=function(t){return"'''"+(t=t.replace(/'''/g,"\\'\\'\\'"))+"'''"},y.Python.scrub_=function(t,n,o){var e="";if(!t.outputConnection||!t.outputConnection.targetConnection){var r=t.getCommentText();r&&(r=y.utils.string.wrap(r,y.Python.COMMENT_WRAP-3),e+=y.Python.prefixLines(r+"\n","# "));for(var i=0;i<t.inputList.length;i++)t.inputList[i].type==y.INPUT_VALUE&&(r=t.inputList[i].connection.targetBlock())&&(r=y.Python.allNestedComments(r))&&(e+=y.Python.prefixLines(r,"# "))}return t=t.nextConnection&&t.nextConnection.targetBlock(),e+n+(o=o?"":y.Python.blockToCode(t))},y.Python.getAdjustedInt=function(t,n,o,e){o=o||0,t.workspace.options.oneBasedIndex&&o--;var r=t.workspace.options.oneBasedIndex?"1":"0";return t=y.Python.valueToCode(t,n,o?y.Python.ORDER_ADDITIVE:y.Python.ORDER_NONE)||r,y.isNumber(t)?(t=parseInt(t,10)+o,e&&(t=-t)):(t=0<o?"int("+t+" + "+o+")":o<0?"int("+t+" - "+-o+")":"int("+t+")",e&&(t="-"+t)),t},y.Python.colour={},y.Python.colour_picker=function(t){return[y.Python.quote_(t.getFieldValue("COLOUR")),y.Python.ORDER_ATOMIC]},y.Python.colour_random=function(t){return y.Python.definitions_.import_random="import random",["'#%06x' % random.randint(0, 2**24 - 1)",y.Python.ORDER_FUNCTION_CALL]},y.Python.colour_rgb=function(t){return[y.Python.provideFunction_("colour_rgb",["def "+y.Python.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b):","  r = round(min(100, max(0, r)) * 2.55)","  g = round(min(100, max(0, g)) * 2.55)","  b = round(min(100, max(0, b)) * 2.55)","  return '#%02x%02x%02x' % (r, g, b)"])+"("+(y.Python.valueToCode(t,"RED",y.Python.ORDER_NONE)||0)+", "+(y.Python.valueToCode(t,"GREEN",y.Python.ORDER_NONE)||0)+", "+(t=y.Python.valueToCode(t,"BLUE",y.Python.ORDER_NONE)||0)+")",y.Python.ORDER_FUNCTION_CALL]},y.Python.colour_blend=function(t){return[y.Python.provideFunction_("colour_blend",["def "+y.Python.FUNCTION_NAME_PLACEHOLDER_+"(colour1, colour2, ratio):","  r1, r2 = int(colour1[1:3], 16), int(colour2[1:3], 16)","  g1, g2 = int(colour1[3:5], 16), int(colour2[3:5], 16)","  b1, b2 = int(colour1[5:7], 16), int(colour2[5:7], 16)","  ratio = min(1, max(0, ratio))","  r = round(r1 * (1 - ratio) + r2 * ratio)","  g = round(g1 * (1 - ratio) + g2 * ratio)","  b = round(b1 * (1 - ratio) + b2 * ratio)","  return '#%02x%02x%02x' % (r, g, b)"])+"("+(y.Python.valueToCode(t,"COLOUR1",y.Python.ORDER_NONE)||"'#000000'")+", "+(y.Python.valueToCode(t,"COLOUR2",y.Python.ORDER_NONE)||"'#000000'")+", "+(t=y.Python.valueToCode(t,"RATIO",y.Python.ORDER_NONE)||0)+")",y.Python.ORDER_FUNCTION_CALL]},y.Python.lists={},y.Python.lists_create_empty=function(t){return["[]",y.Python.ORDER_ATOMIC]},y.Python.lists_create_with=function(t){for(var n=Array(t.itemCount_),o=0;o<t.itemCount_;o++)n[o]=y.Python.valueToCode(t,"ADD"+o,y.Python.ORDER_NONE)||"None";return["["+n.join(", ")+"]",y.Python.ORDER_ATOMIC]},y.Python.lists_repeat=function(t){return["["+(y.Python.valueToCode(t,"ITEM",y.Python.ORDER_NONE)||"None")+"] * "+(t=y.Python.valueToCode(t,"NUM",y.Python.ORDER_MULTIPLICATIVE)||"0"),y.Python.ORDER_MULTIPLICATIVE]},y.Python.lists_length=function(t){return["len("+(y.Python.valueToCode(t,"VALUE",y.Python.ORDER_NONE)||"[]")+")",y.Python.ORDER_FUNCTION_CALL]},y.Python.lists_isEmpty=function(t){return["not len("+(y.Python.valueToCode(t,"VALUE",y.Python.ORDER_NONE)||"[]")+")",y.Python.ORDER_LOGICAL_NOT]},y.Python.lists_indexOf=function(t){var n,o,e=y.Python.valueToCode(t,"FIND",y.Python.ORDER_NONE)||"[]",r=y.Python.valueToCode(t,"VALUE",y.Python.ORDER_NONE)||"''",i=t.workspace.options.oneBasedIndex?(n=" 0",o=" + 1",""):(n=" -1",o=""," - 1");return"FIRST"==t.getFieldValue("END")?[(t=y.Python.provideFunction_("first_index",["def "+y.Python.FUNCTION_NAME_PLACEHOLDER_+"(my_list, elem):","  try: index = my_list.index(elem)"+o,"  except: index ="+n,"  return index"]))+"("+r+", "+e+")",y.Python.ORDER_FUNCTION_CALL]:[(t=y.Python.provideFunction_("last_index",["def "+y.Python.FUNCTION_NAME_PLACEHOLDER_+"(my_list, elem):","  try: index = len(my_list) - my_list[::-1].index(elem)"+i,"  except: index ="+n,"  return index"]))+"("+r+", "+e+")",y.Python.ORDER_FUNCTION_CALL]},y.Python.lists_getIndex=function(t){var n=t.getFieldValue("MODE")||"GET",o=t.getFieldValue("WHERE")||"FROM_START",e=y.Python.valueToCode(t,"VALUE","RANDOM"==o?y.Python.ORDER_NONE:y.Python.ORDER_MEMBER)||"[]";switch(o){case"FIRST":if("GET"==n)return[e+"[0]",y.Python.ORDER_MEMBER];if("GET_REMOVE"==n)return[e+".pop(0)",y.Python.ORDER_FUNCTION_CALL];if("REMOVE"==n)return e+".pop(0)\n";break;case"LAST":if("GET"==n)return[e+"[-1]",y.Python.ORDER_MEMBER];if("GET_REMOVE"==n)return[e+".pop()",y.Python.ORDER_FUNCTION_CALL];if("REMOVE"==n)return e+".pop()\n";break;case"FROM_START":if(t=y.Python.getAdjustedInt(t,"AT"),"GET"==n)return[e+"["+t+"]",y.Python.ORDER_MEMBER];if("GET_REMOVE"==n)return[e+".pop("+t+")",y.Python.ORDER_FUNCTION_CALL];if("REMOVE"==n)return e+".pop("+t+")\n";break;case"FROM_END":if(t=y.Python.getAdjustedInt(t,"AT",1,!0),"GET"==n)return[e+"["+t+"]",y.Python.ORDER_MEMBER];if("GET_REMOVE"==n)return[e+".pop("+t+")",y.Python.ORDER_FUNCTION_CALL];if("REMOVE"==n)return e+".pop("+t+")\n";break;case"RANDOM":if(y.Python.definitions_.import_random="import random","GET"==n)return["random.choice("+e+")",y.Python.ORDER_FUNCTION_CALL];if(e=y.Python.provideFunction_("lists_remove_random_item",["def "+y.Python.FUNCTION_NAME_PLACEHOLDER_+"(myList):","  x = int(random.random() * len(myList))","  return myList.pop(x)"])+"("+e+")","GET_REMOVE"==n)return[e,y.Python.ORDER_FUNCTION_CALL];if("REMOVE"==n)return e+"\n"}throw Error("Unhandled combination (lists_getIndex).")},y.Python.lists_setIndex=function(t){var n=y.Python.valueToCode(t,"LIST",y.Python.ORDER_MEMBER)||"[]",o=t.getFieldValue("MODE")||"GET",e=t.getFieldValue("WHERE")||"FROM_START",r=y.Python.valueToCode(t,"TO",y.Python.ORDER_NONE)||"None";switch(e){case"FIRST":if("SET"==o)return n+"[0] = "+r+"\n";if("INSERT"==o)return n+".insert(0, "+r+")\n";break;case"LAST":if("SET"==o)return n+"[-1] = "+r+"\n";if("INSERT"==o)return n+".append("+r+")\n";break;case"FROM_START":if(t=y.Python.getAdjustedInt(t,"AT"),"SET"==o)return n+"["+t+"] = "+r+"\n";if("INSERT"==o)return n+".insert("+t+", "+r+")\n";break;case"FROM_END":if(t=y.Python.getAdjustedInt(t,"AT",1,!0),"SET"==o)return n+"["+t+"] = "+r+"\n";if("INSERT"==o)return n+".insert("+t+", "+r+")\n";break;case"RANDOM":if(y.Python.definitions_.import_random="import random",t=n.match(/^\w+$/)?"":(e=(t=y.Python.variableDB_.getDistinctName("tmp_list",y.VARIABLE_CATEGORY_NAME))+" = "+n+"\n",n=t,e),t+=(e=y.Python.variableDB_.getDistinctName("tmp_x",y.VARIABLE_CATEGORY_NAME))+" = int(random.random() * len("+n+"))\n","SET"==o)return t+(n+"[")+e+"] = "+r+"\n";if("INSERT"==o)return t+(n+".insert(")+e+", "+r+")\n"}throw Error("Unhandled combination (lists_setIndex).")},y.Python.lists_getSublist=function(t){var n=y.Python.valueToCode(t,"LIST",y.Python.ORDER_MEMBER)||"[]",o=t.getFieldValue("WHERE1"),e=t.getFieldValue("WHERE2");switch(o){case"FROM_START":"0"==(o=y.Python.getAdjustedInt(t,"AT1"))&&(o="");break;case"FROM_END":o=y.Python.getAdjustedInt(t,"AT1",1,!0);break;case"FIRST":o="";break;default:throw Error("Unhandled option (lists_getSublist)")}switch(e){case"FROM_START":t=y.Python.getAdjustedInt(t,"AT2",1);break;case"FROM_END":t=y.Python.getAdjustedInt(t,"AT2",0,!0),y.isNumber(String(t))?"0"==t&&(t=""):(y.Python.definitions_.import_sys="import sys",t+=" or sys.maxsize");break;case"LAST":t="";break;default:throw Error("Unhandled option (lists_getSublist)")}return[n+"["+o+" : "+t+"]",y.Python.ORDER_MEMBER]},y.Python.lists_sort=function(t){var n=y.Python.valueToCode(t,"LIST",y.Python.ORDER_NONE)||"[]",o=t.getFieldValue("TYPE");return t="1"===t.getFieldValue("DIRECTION")?"False":"True",[y.Python.provideFunction_("lists_sort",["def "+y.Python.FUNCTION_NAME_PLACEHOLDER_+"(my_list, type, reverse):","  def try_float(s):","    try:","      return float(s)","    except:","      return 0","  key_funcs = {",'    "NUMERIC": try_float,','    "TEXT": str,','    "IGNORE_CASE": lambda s: str(s).lower()',"  }","  key_func = key_funcs[type]","  list_cpy = list(my_list)","  return sorted(list_cpy, key=key_func, reverse=reverse)"])+"("+n+', "'+o+'", '+t+")",y.Python.ORDER_FUNCTION_CALL]},y.Python.lists_split=function(t){var n=t.getFieldValue("MODE");if("SPLIT"==n)t=(n=y.Python.valueToCode(t,"INPUT",y.Python.ORDER_MEMBER)||"''")+".split("+(t=y.Python.valueToCode(t,"DELIM",y.Python.ORDER_NONE))+")";else{if("JOIN"!=n)throw Error("Unknown mode: "+n);n=y.Python.valueToCode(t,"INPUT",y.Python.ORDER_NONE)||"[]",t=(t=y.Python.valueToCode(t,"DELIM",y.Python.ORDER_MEMBER)||"''")+".join("+n+")"}return[t,y.Python.ORDER_FUNCTION_CALL]},y.Python.lists_reverse=function(t){return["list(reversed("+(y.Python.valueToCode(t,"LIST",y.Python.ORDER_NONE)||"[]")+"))",y.Python.ORDER_FUNCTION_CALL]},y.Python.logic={},y.Python.controls_if=function(t){var n=0,o="";y.Python.STATEMENT_PREFIX&&(o+=y.Python.injectId(y.Python.STATEMENT_PREFIX,t));do{var e=y.Python.valueToCode(t,"IF"+n,y.Python.ORDER_NONE)||"False",r=y.Python.statementToCode(t,"DO"+n)||y.Python.PASS;y.Python.STATEMENT_SUFFIX&&(r=y.Python.prefixLines(y.Python.injectId(y.Python.STATEMENT_SUFFIX,t),y.Python.INDENT)+r),o+=(0==n?"if ":"elif ")+e+":\n"+r,++n}while(t.getInput("IF"+n));return(t.getInput("ELSE")||y.Python.STATEMENT_SUFFIX)&&(r=y.Python.statementToCode(t,"ELSE")||y.Python.PASS,y.Python.STATEMENT_SUFFIX&&(r=y.Python.prefixLines(y.Python.injectId(y.Python.STATEMENT_SUFFIX,t),y.Python.INDENT)+r),o+="else:\n"+r),o},y.Python.controls_ifelse=y.Python.controls_if,y.Python.logic_compare=function(t){var n={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[t.getFieldValue("OP")],o=y.Python.ORDER_RELATIONAL;return[(y.Python.valueToCode(t,"A",o)||"0")+" "+n+" "+(t=y.Python.valueToCode(t,"B",o)||"0"),o]},y.Python.logic_operation=function(t){var n,o="AND"==t.getFieldValue("OP")?"and":"or",e="and"==o?y.Python.ORDER_LOGICAL_AND:y.Python.ORDER_LOGICAL_OR,r=y.Python.valueToCode(t,"A",e);return t=y.Python.valueToCode(t,"B",e),t=r||t?(n="and"==o?"True":"False",r=r||n,t||n):r="False",[r+" "+o+" "+t,e]},y.Python.logic_negate=function(t){return["not "+(y.Python.valueToCode(t,"BOOL",y.Python.ORDER_LOGICAL_NOT)||"True"),y.Python.ORDER_LOGICAL_NOT]},y.Python.logic_boolean=function(t){return["TRUE"==t.getFieldValue("BOOL")?"True":"False",y.Python.ORDER_ATOMIC]},y.Python.logic_null=function(t){return["None",y.Python.ORDER_ATOMIC]},y.Python.logic_ternary=function(t){var n=y.Python.valueToCode(t,"IF",y.Python.ORDER_CONDITIONAL)||"False";return[(y.Python.valueToCode(t,"THEN",y.Python.ORDER_CONDITIONAL)||"None")+" if "+n+" else "+(t=y.Python.valueToCode(t,"ELSE",y.Python.ORDER_CONDITIONAL)||"None"),y.Python.ORDER_CONDITIONAL]},y.Python.loops={},y.Python.controls_repeat_ext=function(t){var n=t.getField("TIMES")?String(parseInt(t.getFieldValue("TIMES"),10)):y.Python.valueToCode(t,"TIMES",y.Python.ORDER_NONE)||"0",n=y.isNumber(n)?parseInt(n,10):"int("+n+")",o=y.Python.statementToCode(t,"DO"),o=y.Python.addLoopTrap(o,t)||y.Python.PASS;return"for "+y.Python.variableDB_.getDistinctName("count",y.VARIABLE_CATEGORY_NAME)+" in range("+n+"):\n"+o},y.Python.controls_repeat=y.Python.controls_repeat_ext,y.Python.controls_whileUntil=function(t){var n="UNTIL"==t.getFieldValue("MODE"),o=y.Python.valueToCode(t,"BOOL",n?y.Python.ORDER_LOGICAL_NOT:y.Python.ORDER_NONE)||"False",e=y.Python.statementToCode(t,"DO");return n&&(o="not "+o),"while "+o+":\n"+(e=y.Python.addLoopTrap(e,t)||y.Python.PASS)},y.Python.controls_for=function(t){function e(){return y.Python.provideFunction_("upRange",["def "+y.Python.FUNCTION_NAME_PLACEHOLDER_+"(start, stop, step):","  while start <= stop:","    yield start","    start += abs(step)"])}function r(){return y.Python.provideFunction_("downRange",["def "+y.Python.FUNCTION_NAME_PLACEHOLDER_+"(start, stop, step):","  while start >= stop:","    yield start","    start -= abs(step)"])}var n,o=y.Python.variableDB_.getName(t.getFieldValue("VAR"),y.VARIABLE_CATEGORY_NAME),i=y.Python.valueToCode(t,"FROM",y.Python.ORDER_NONE)||"0",a=y.Python.valueToCode(t,"TO",y.Python.ORDER_NONE)||"0",E=y.Python.valueToCode(t,"BY",y.Python.ORDER_NONE)||"1",h=y.Python.statementToCode(t,"DO"),h=y.Python.addLoopTrap(h,t)||y.Python.PASS,_="";return t=function(t,n,o){return"("+t+" <= "+n+") and "+e()+"("+t+", "+n+", "+o+") or "+r()+"("+t+", "+n+", "+o+")"},y.isNumber(i)&&y.isNumber(a)&&y.isNumber(E)?(i=Number(i),a=Number(a),E=Math.abs(Number(E)),0==i%1&&0==a%1&&0==E%1?(i<=a?(a++,t=0==i&&1==E?a:i+", "+a,1!=E&&(t+=", "+E)):t=i+", "+--a+", -"+E,t="range("+t+")"):(t=(i<a?e:r)(),t+="("+i+", "+a+", "+E+")")):(i=(n=function(t,n){return t=y.isNumber(t)?Number(t):t.match(/^\w+$/)?"float("+t+")":(n=y.Python.variableDB_.getDistinctName(o+n,y.VARIABLE_CATEGORY_NAME),_+=n+" = float("+t+")\n",n)})(i,"_start"),a=n(a,"_end"),n(E,"_inc"),t="number"==typeof i&&"number"==typeof a?(i<a?e:r)():t(i,a,E)),_+="for "+o+" in "+t+":\n"+h},y.Python.controls_forEach=function(t){var n=y.Python.variableDB_.getName(t.getFieldValue("VAR"),y.VARIABLE_CATEGORY_NAME),o=y.Python.valueToCode(t,"LIST",y.Python.ORDER_RELATIONAL)||"[]",e=y.Python.statementToCode(t,"DO");return"for "+n+" in "+o+":\n"+(e=y.Python.addLoopTrap(e,t)||y.Python.PASS)},y.Python.controls_flow_statements=function(t){var n,o="";switch(y.Python.STATEMENT_PREFIX&&(o+=y.Python.injectId(y.Python.STATEMENT_PREFIX,t)),y.Python.STATEMENT_SUFFIX&&(o+=y.Python.injectId(y.Python.STATEMENT_SUFFIX,t)),!y.Python.STATEMENT_PREFIX||(n=y.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(t))&&!n.suppressPrefixSuffix&&(o+=y.Python.injectId(y.Python.STATEMENT_PREFIX,n)),t.getFieldValue("FLOW")){case"BREAK":return o+"break\n";case"CONTINUE":return o+"continue\n"}throw Error("Unknown flow statement.")},y.Python.math={},y.Python.addReservedWords("math,random,Number"),y.Python.math_number=function(t){var n=1/0==(t=Number(t.getFieldValue("NUM")))?(t='float("inf")',y.Python.ORDER_FUNCTION_CALL):-1/0==t?(t='-float("inf")',y.Python.ORDER_UNARY_SIGN):t<0?y.Python.ORDER_UNARY_SIGN:y.Python.ORDER_ATOMIC;return[t,n]},y.Python.math_arithmetic=function(t){var n=(o={ADD:[" + ",y.Python.ORDER_ADDITIVE],MINUS:[" - ",y.Python.ORDER_ADDITIVE],MULTIPLY:[" * ",y.Python.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",y.Python.ORDER_MULTIPLICATIVE],POWER:[" ** ",y.Python.ORDER_EXPONENTIATION]}[t.getFieldValue("OP")])[0],o=o[1];return[(y.Python.valueToCode(t,"A",o)||"0")+n+(t=y.Python.valueToCode(t,"B",o)||"0"),o]},y.Python.math_single=function(t){var n=t.getFieldValue("OP");if("NEG"==n){var o=y.Python.valueToCode(t,"NUM",y.Python.ORDER_UNARY_SIGN)||"0";return["-"+o,y.Python.ORDER_UNARY_SIGN]}switch(y.Python.definitions_.import_math="import math",t="SIN"==n||"COS"==n||"TAN"==n?y.Python.valueToCode(t,"NUM",y.Python.ORDER_MULTIPLICATIVE)||"0":y.Python.valueToCode(t,"NUM",y.Python.ORDER_NONE)||"0",n){case"ABS":o="math.fabs("+t+")";break;case"ROOT":o="math.sqrt("+t+")";break;case"LN":o="math.log("+t+")";break;case"LOG10":o="math.log10("+t+")";break;case"EXP":o="math.exp("+t+")";break;case"POW10":o="math.pow(10,"+t+")";break;case"ROUND":o="round("+t+")";break;case"ROUNDUP":o="math.ceil("+t+")";break;case"ROUNDDOWN":o="math.floor("+t+")";break;case"SIN":o="math.sin("+t+" / 180.0 * math.pi)";break;case"COS":o="math.cos("+t+" / 180.0 * math.pi)";break;case"TAN":o="math.tan("+t+" / 180.0 * math.pi)"}if(o)return[o,y.Python.ORDER_FUNCTION_CALL];switch(n){case"ASIN":o="math.asin("+t+") / math.pi * 180";break;case"ACOS":o="math.acos("+t+") / math.pi * 180";break;case"ATAN":o="math.atan("+t+") / math.pi * 180";break;default:throw Error("Unknown math operator: "+n)}return[o,y.Python.ORDER_MULTIPLICATIVE]},y.Python.math_constant=function(t){var n={PI:["math.pi",y.Python.ORDER_MEMBER],E:["math.e",y.Python.ORDER_MEMBER],GOLDEN_RATIO:["(1 + math.sqrt(5)) / 2",y.Python.ORDER_MULTIPLICATIVE],SQRT2:["math.sqrt(2)",y.Python.ORDER_MEMBER],SQRT1_2:["math.sqrt(1.0 / 2)",y.Python.ORDER_MEMBER],INFINITY:["float('inf')",y.Python.ORDER_ATOMIC]};return"INFINITY"!=(t=t.getFieldValue("CONSTANT"))&&(y.Python.definitions_.import_math="import math"),n[t]},y.Python.math_number_property=function(t){var n=y.Python.valueToCode(t,"NUMBER_TO_CHECK",y.Python.ORDER_MULTIPLICATIVE)||"0",o=t.getFieldValue("PROPERTY");if("PRIME"==o)return y.Python.definitions_.import_math="import math",y.Python.definitions_.from_numbers_import_Number="from numbers import Number",[y.Python.provideFunction_("math_isPrime",["def "+y.Python.FUNCTION_NAME_PLACEHOLDER_+"(n):","  # https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  # If n is not a number but a string, try parsing it.","  if not isinstance(n, Number):","    try:","      n = float(n)","    except:","      return False","  if n == 2 or n == 3:","    return True","  # False if n is negative, is 1, or not whole, or if n is divisible by 2 or 3.","  if n <= 1 or n % 1 != 0 or n % 2 == 0 or n % 3 == 0:","    return False","  # Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for x in range(6, int(math.sqrt(n)) + 2, 6):","    if n % (x - 1) == 0 or n % (x + 1) == 0:","      return False","  return True"])+"("+n+")",y.Python.ORDER_FUNCTION_CALL];switch(o){case"EVEN":var e=n+" % 2 == 0";break;case"ODD":e=n+" % 2 == 1";break;case"WHOLE":e=n+" % 1 == 0";break;case"POSITIVE":e=n+" > 0";break;case"NEGATIVE":e=n+" < 0";break;case"DIVISIBLE_BY":if(!(t=y.Python.valueToCode(t,"DIVISOR",y.Python.ORDER_MULTIPLICATIVE))||"0"==t)return["False",y.Python.ORDER_ATOMIC];e=n+" % "+t+" == 0"}return[e,y.Python.ORDER_RELATIONAL]},y.Python.math_change=function(t){y.Python.definitions_.from_numbers_import_Number="from numbers import Number";var n=y.Python.valueToCode(t,"DELTA",y.Python.ORDER_ADDITIVE)||"0";return(t=y.Python.variableDB_.getName(t.getFieldValue("VAR"),y.VARIABLE_CATEGORY_NAME))+" = ("+t+" if isinstance("+t+", Number) else 0) + "+n+"\n"},y.Python.math_round=y.Python.math_single,y.Python.math_trig=y.Python.math_single,y.Python.math_on_list=function(t){var n=t.getFieldValue("OP");switch(t=y.Python.valueToCode(t,"LIST",y.Python.ORDER_NONE)||"[]",n){case"SUM":n="sum("+t+")";break;case"MIN":n="min("+t+")";break;case"MAX":n="max("+t+")";break;case"AVERAGE":y.Python.definitions_.from_numbers_import_Number="from numbers import Number",n=(n=y.Python.provideFunction_("math_mean",["def "+y.Python.FUNCTION_NAME_PLACEHOLDER_+"(myList):","  localList = [e for e in myList if isinstance(e, Number)]","  if not localList: return","  return float(sum(localList)) / len(localList)"]))+"("+t+")";break;case"MEDIAN":y.Python.definitions_.from_numbers_import_Number="from numbers import Number",n=(n=y.Python.provideFunction_("math_median",["def "+y.Python.FUNCTION_NAME_PLACEHOLDER_+"(myList):","  localList = sorted([e for e in myList if isinstance(e, Number)])","  if not localList: return","  if len(localList) % 2 == 0:","    return (localList[len(localList) // 2 - 1] + localList[len(localList) // 2]) / 2.0","  else:","    return localList[(len(localList) - 1) // 2]"]))+"("+t+")";break;case"MODE":n=(n=y.Python.provideFunction_("math_modes",["def "+y.Python.FUNCTION_NAME_PLACEHOLDER_+"(some_list):","  modes = []","  # Using a lists of [item, count] to keep count rather than dict",'  # to avoid "unhashable" errors when the counted item is itself a list or dict.',"  counts = []","  maxCount = 1","  for item in some_list:","    found = False","    for count in counts:","      if count[0] == item:","        count[1] += 1","        maxCount = max(maxCount, count[1])","        found = True","    if not found:","      counts.append([item, 1])","  for counted_item, item_count in counts:","    if item_count == maxCount:","      modes.append(counted_item)","  return modes"]))+"("+t+")";break;case"STD_DEV":y.Python.definitions_.import_math="import math",n=(n=y.Python.provideFunction_("math_standard_deviation",["def "+y.Python.FUNCTION_NAME_PLACEHOLDER_+"(numbers):","  n = len(numbers)","  if n == 0: return","  mean = float(sum(numbers)) / n","  variance = sum((x - mean) ** 2 for x in numbers) / n","  return math.sqrt(variance)"]))+"("+t+")";break;case"RANDOM":y.Python.definitions_.import_random="import random",n="random.choice("+t+")";break;default:throw Error("Unknown operator: "+n)}return[n,y.Python.ORDER_FUNCTION_CALL]},y.Python.math_modulo=function(t){return[(y.Python.valueToCode(t,"DIVIDEND",y.Python.ORDER_MULTIPLICATIVE)||"0")+" % "+(t=y.Python.valueToCode(t,"DIVISOR",y.Python.ORDER_MULTIPLICATIVE)||"0"),y.Python.ORDER_MULTIPLICATIVE]},y.Python.math_constrain=function(t){return["min(max("+(y.Python.valueToCode(t,"VALUE",y.Python.ORDER_NONE)||"0")+", "+(y.Python.valueToCode(t,"LOW",y.Python.ORDER_NONE)||"0")+"), "+(t=y.Python.valueToCode(t,"HIGH",y.Python.ORDER_NONE)||"float('inf')")+")",y.Python.ORDER_FUNCTION_CALL]},y.Python.math_random_int=function(t){return y.Python.definitions_.import_random="import random",["random.randint("+(y.Python.valueToCode(t,"FROM",y.Python.ORDER_NONE)||"0")+", "+(t=y.Python.valueToCode(t,"TO",y.Python.ORDER_NONE)||"0")+")",y.Python.ORDER_FUNCTION_CALL]},y.Python.math_random_float=function(t){return y.Python.definitions_.import_random="import random",["random.random()",y.Python.ORDER_FUNCTION_CALL]},y.Python.math_atan2=function(t){y.Python.definitions_.import_math="import math";var n=y.Python.valueToCode(t,"X",y.Python.ORDER_NONE)||"0";return["math.atan2("+(y.Python.valueToCode(t,"Y",y.Python.ORDER_NONE)||"0")+", "+n+") / math.pi * 180",y.Python.ORDER_MULTIPLICATIVE]},y.Python.procedures={},y.Python.procedures_defreturn=function(t){for(var n,o=[],e=t.workspace,r=y.Variables.allUsedVarModels(e)||[],i=0;n=r[i];i++)n=n.name,-1==t.getVars().indexOf(n)&&o.push(y.Python.variableDB_.getName(n,y.VARIABLE_CATEGORY_NAME));for(r=y.Variables.allDeveloperVariables(e),i=0;i<r.length;i++)o.push(y.Python.variableDB_.getName(r[i],y.Names.DEVELOPER_VARIABLE_TYPE));o=o.length?y.Python.INDENT+"global "+o.join(", ")+"\n":"",e=y.Python.variableDB_.getName(t.getFieldValue("NAME"),y.PROCEDURE_CATEGORY_NAME),n="",y.Python.STATEMENT_PREFIX&&(n+=y.Python.injectId(y.Python.STATEMENT_PREFIX,t)),y.Python.STATEMENT_SUFFIX&&(n+=y.Python.injectId(y.Python.STATEMENT_SUFFIX,t)),n=n&&y.Python.prefixLines(n,y.Python.INDENT);var a="";y.Python.INFINITE_LOOP_TRAP&&(a=y.Python.prefixLines(y.Python.injectId(y.Python.INFINITE_LOOP_TRAP,t),y.Python.INDENT));var E=y.Python.statementToCode(t,"STACK"),h=y.Python.valueToCode(t,"RETURN",y.Python.ORDER_NONE)||"",_=E&&h?n:"";h?h=y.Python.INDENT+"return "+h+"\n":E=E||y.Python.PASS;for(var P=[],r=t.getVars(),i=0;i<r.length;i++)P[i]=y.Python.variableDB_.getName(r[i],y.VARIABLE_CATEGORY_NAME);return o="def "+e+"("+P.join(", ")+"):\n"+o+n+a+E+_+h,o=y.Python.scrub_(t,o),y.Python.definitions_["%"+e]=o,null},y.Python.procedures_defnoreturn=y.Python.procedures_defreturn,y.Python.procedures_callreturn=function(t){for(var n=y.Python.variableDB_.getName(t.getFieldValue("NAME"),y.PROCEDURE_CATEGORY_NAME),o=[],e=t.getVars(),r=0;r<e.length;r++)o[r]=y.Python.valueToCode(t,"ARG"+r,y.Python.ORDER_NONE)||"None";return[n+"("+o.join(", ")+")",y.Python.ORDER_FUNCTION_CALL]},y.Python.procedures_callnoreturn=function(t){return y.Python.procedures_callreturn(t)[0]+"\n"},y.Python.procedures_ifreturn=function(t){var n="if "+(y.Python.valueToCode(t,"CONDITION",y.Python.ORDER_NONE)||"False")+":\n";return y.Python.STATEMENT_SUFFIX&&(n+=y.Python.prefixLines(y.Python.injectId(y.Python.STATEMENT_SUFFIX,t),y.Python.INDENT)),t.hasReturnValue_?(t=y.Python.valueToCode(t,"VALUE",y.Python.ORDER_NONE)||"None",n+=y.Python.INDENT+"return "+t+"\n"):n+=y.Python.INDENT+"return\n",n},y.Python.texts={},y.Python.text=function(t){return[y.Python.quote_(t.getFieldValue("TEXT")),y.Python.ORDER_ATOMIC]},y.Python.text_multiline=function(t){return[y.Python.multiline_quote_(t.getFieldValue("TEXT")),y.Python.ORDER_ATOMIC]},y.Python.text.forceString_=function(t){return y.Python.text.forceString_.strRegExp.test(t)?t:"str("+t+")"},y.Python.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,y.Python.text_join=function(t){switch(t.itemCount_){case 0:return["''",y.Python.ORDER_ATOMIC];case 1:return t=y.Python.valueToCode(t,"ADD0",y.Python.ORDER_NONE)||"''",[t=y.Python.text.forceString_(t),y.Python.ORDER_FUNCTION_CALL];case 2:var n=y.Python.valueToCode(t,"ADD0",y.Python.ORDER_NONE)||"''";return t=y.Python.valueToCode(t,"ADD1",y.Python.ORDER_NONE)||"''",[t=y.Python.text.forceString_(n)+" + "+y.Python.text.forceString_(t),y.Python.ORDER_ADDITIVE];default:n=[];for(var o=0;o<t.itemCount_;o++)n[o]=y.Python.valueToCode(t,"ADD"+o,y.Python.ORDER_NONE)||"''";return[t="''.join([str("+(t=y.Python.variableDB_.getDistinctName("x",y.VARIABLE_CATEGORY_NAME))+") for "+t+" in ["+n.join(", ")+"]])",y.Python.ORDER_FUNCTION_CALL]}},y.Python.text_append=function(t){var n=y.Python.variableDB_.getName(t.getFieldValue("VAR"),y.VARIABLE_CATEGORY_NAME);return t=y.Python.valueToCode(t,"TEXT",y.Python.ORDER_NONE)||"''",n+" = str("+n+") + "+y.Python.text.forceString_(t)+"\n"},y.Python.text_length=function(t){return["len("+(y.Python.valueToCode(t,"VALUE",y.Python.ORDER_NONE)||"''")+")",y.Python.ORDER_FUNCTION_CALL]},y.Python.text_isEmpty=function(t){return["not len("+(y.Python.valueToCode(t,"VALUE",y.Python.ORDER_NONE)||"''")+")",y.Python.ORDER_LOGICAL_NOT]},y.Python.text_indexOf=function(t){var n="FIRST"==t.getFieldValue("END")?"find":"rfind",o=y.Python.valueToCode(t,"FIND",y.Python.ORDER_NONE)||"''",n=(y.Python.valueToCode(t,"VALUE",y.Python.ORDER_MEMBER)||"''")+"."+n+"("+o+")";return t.workspace.options.oneBasedIndex?[n+" + 1",y.Python.ORDER_ADDITIVE]:[n,y.Python.ORDER_FUNCTION_CALL]},y.Python.text_charAt=function(t){var n=t.getFieldValue("WHERE")||"FROM_START",o=y.Python.valueToCode(t,"VALUE",y.Python.ORDER_MEMBER)||"''";switch(n){case"FIRST":return[o+"[0]",y.Python.ORDER_MEMBER];case"LAST":return[o+"[-1]",y.Python.ORDER_MEMBER];case"FROM_START":return[o+"["+(t=y.Python.getAdjustedInt(t,"AT"))+"]",y.Python.ORDER_MEMBER];case"FROM_END":return[o+"["+(t=y.Python.getAdjustedInt(t,"AT",1,!0))+"]",y.Python.ORDER_MEMBER];case"RANDOM":return y.Python.definitions_.import_random="import random",[y.Python.provideFunction_("text_random_letter",["def "+y.Python.FUNCTION_NAME_PLACEHOLDER_+"(text):","  x = int(random.random() * len(text))","  return text[x];"])+"("+o+")",y.Python.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},y.Python.text_getSubstring=function(t){var n=t.getFieldValue("WHERE1"),o=t.getFieldValue("WHERE2"),e=y.Python.valueToCode(t,"STRING",y.Python.ORDER_MEMBER)||"''";switch(n){case"FROM_START":"0"==(n=y.Python.getAdjustedInt(t,"AT1"))&&(n="");break;case"FROM_END":n=y.Python.getAdjustedInt(t,"AT1",1,!0);break;case"FIRST":n="";break;default:throw Error("Unhandled option (text_getSubstring)")}switch(o){case"FROM_START":t=y.Python.getAdjustedInt(t,"AT2",1);break;case"FROM_END":t=y.Python.getAdjustedInt(t,"AT2",0,!0),y.isNumber(String(t))?"0"==t&&(t=""):(y.Python.definitions_.import_sys="import sys",t+=" or sys.maxsize");break;case"LAST":t="";break;default:throw Error("Unhandled option (text_getSubstring)")}return[e+"["+n+" : "+t+"]",y.Python.ORDER_MEMBER]},y.Python.text_changeCase=function(t){var n={UPPERCASE:".upper()",LOWERCASE:".lower()",TITLECASE:".title()"}[t.getFieldValue("CASE")];return[(y.Python.valueToCode(t,"TEXT",y.Python.ORDER_MEMBER)||"''")+n,y.Python.ORDER_FUNCTION_CALL]},y.Python.text_trim=function(t){var n={LEFT:".lstrip()",RIGHT:".rstrip()",BOTH:".strip()"}[t.getFieldValue("MODE")];return[(y.Python.valueToCode(t,"TEXT",y.Python.ORDER_MEMBER)||"''")+n,y.Python.ORDER_FUNCTION_CALL]},y.Python.text_print=function(t){return"print("+(y.Python.valueToCode(t,"TEXT",y.Python.ORDER_NONE)||"''")+")\n"},y.Python.text_prompt_ext=function(t){var n=(n=y.Python.provideFunction_("text_prompt",["def "+y.Python.FUNCTION_NAME_PLACEHOLDER_+"(msg):","  try:","    return raw_input(msg)","  except NameError:","    return input(msg)"]))+"("+(t.getField("TEXT")?y.Python.quote_(t.getFieldValue("TEXT")):y.Python.valueToCode(t,"TEXT",y.Python.ORDER_NONE)||"''")+")";return"NUMBER"==t.getFieldValue("TYPE")&&(n="float("+n+")"),[n,y.Python.ORDER_FUNCTION_CALL]},y.Python.text_prompt=y.Python.text_prompt_ext,y.Python.text_count=function(t){return[(y.Python.valueToCode(t,"TEXT",y.Python.ORDER_MEMBER)||"''")+".count("+(t=y.Python.valueToCode(t,"SUB",y.Python.ORDER_NONE)||"''")+")",y.Python.ORDER_MEMBER]},y.Python.text_replace=function(t){return[(y.Python.valueToCode(t,"TEXT",y.Python.ORDER_MEMBER)||"''")+".replace("+(y.Python.valueToCode(t,"FROM",y.Python.ORDER_NONE)||"''")+", "+(t=y.Python.valueToCode(t,"TO",y.Python.ORDER_NONE)||"''")+")",y.Python.ORDER_MEMBER]},y.Python.text_reverse=function(t){return[(y.Python.valueToCode(t,"TEXT",y.Python.ORDER_MEMBER)||"''")+"[::-1]",y.Python.ORDER_MEMBER]},y.Python.variables={},y.Python.variables_get=function(t){return[y.Python.variableDB_.getName(t.getFieldValue("VAR"),y.VARIABLE_CATEGORY_NAME),y.Python.ORDER_ATOMIC]},y.Python.variables_set=function(t){var n=y.Python.valueToCode(t,"VALUE",y.Python.ORDER_NONE)||"0";return y.Python.variableDB_.getName(t.getFieldValue("VAR"),y.VARIABLE_CATEGORY_NAME)+" = "+n+"\n"},y.Python.variablesDynamic={},y.Python.variables_get_dynamic=y.Python.variables_get,y.Python.variables_set_dynamic=y.Python.variables_set,y.Python});